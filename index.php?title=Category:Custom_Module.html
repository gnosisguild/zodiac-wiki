<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Category:Custom Module - Gnosis zodiac.wiki</title>
<script>document.documentElement.className="client-js";RLCONF={"wgBreakFrames":!1,"wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgRequestId":"ZjAS4S7DICve97Aa9a0QagAAAhg","wgCSPNonce":!1,"wgCanonicalNamespace":"Category","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":14,"wgPageName":"Category:Custom_Module","wgTitle":"Custom Module","wgCurRevisionId":444,"wgRevisionId":444,"wgArticleId":46,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Documentation","Module","DAO Operator"],"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgRelevantPageName":"Category:Custom_Module","wgRelevantArticleId":46,"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":["sysop"],"wgRestrictionMove":["sysop"]};
RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","mediawiki.action.view.categoryPage.styles":"ready","mediawiki.helplink":"ready","skins.zodiac":"ready"};RLPAGEMODULES=["site","mediawiki.page.ready","mediawiki.toc","skins.zodiac.js","ext.moderation.notify","ext.moderation.notify.desktop"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.options@1hzgi",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="load.php%3Flang=en&amp;modules=mediawiki.action.view.categoryPage.styles|mediawiki.helplink|skins.zodiac&amp;only=styles&amp;skin=zodiac.css"/>
<script async="" src="load.php%3Flang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=zodiac"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Flang=en&amp;modules=site.styles&amp;only=styles&amp;skin=zodiac.css"/>
<meta name="generator" content="MediaWiki 1.37.1"/>
<meta name="format-detection" content="telephone=no"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="1"/>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;600&amp;family=Spectral:wght@400;600&amp;display=swap"/>
<link rel="shortcut icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Gnosis zodiac.wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://zodiac.wiki/api.php?action=rsd"/>
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"/>
</head>
<body class="text-gray-200 mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-14 ns-subject page-Category_Custom_Module rootpage-Category_Custom_Module skin-zodiac action-view">
	<div class="relative w-full px-2 md:px-6 pt-10 mx-auto mb-2">
		<div class="md:absolute top-0 mt-2 md:mt-6 w-full left-0 px-6">
			<ul class="flex flex-wrap justify-center md:justify-end list-reset personal-tools">
				<li id="pt-anonuserpage" class="mw-list-item">Not logged in</li><li id="pt-anontalk" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Special:MyTalk" title="Discussion about edits from this IP address [n]" accesskey="n">Talk</a></li><li id="pt-anoncontribs" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Special:MyContributions" title="A list of edits made from this IP address [y]" accesskey="y">Contributions</a></li><li id="pt-createaccount" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Special:CreateAccount&amp;returnto=Category%3ACustom+Module" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Special:UserLogin&amp;returnto=Category%3ACustom+Module" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>			</ul>
		</div>
		<div class="flex flex-col items-center justify-center w-full">
			<h1 class="text-3xl md:text-5xl font-thin leading-none tracking-widest uppercase text-brown-200 border-0">Zodiac Wiki</h1>
			<div class="flex items-center w-full space-x-6 md:space-x-12">
				<div class="w-full h-2 border-t-2 border-b-2 border-brown-200"></div>
				<img src="skins/zodiac/assets/images/orb.png" alt="Gnosis Guild orb" class="w-16">
				<div class="w-full h-2 border-t-2 border-b-2 border-brown-200"></div>
			</div>
		</div>
	</div>
	<div class="flex flex-wrap items-center justify-between p-2">
		<div>

			<div class="inline-block mb-4 md:hidden">
				<button id="toggle-navigation" class="link">
					Menu
				</button>

				<a href="index.html">
					Home
				</a>
			</div>
		</div>
	</div>

	<div class="flex flex-col flex-grow px-2 mb-20 md:px-6">
		<div class="grid grid-cols-12 gap-6 lg:gap-12 mx-auto max-w-screen-xl">
			<div class="flex-none space-y-4 col-start-1 col-end-13 md:col-end-5 lg:col-end-4 max-md:hidden" id="sidebar">
									<div
						class="p-4 border-2 border-double shadow-2xl bg-brown-900 border-brown-500 bg-blur-12"
						id="p-Information" 					>
												<h5 class="mt-0 font-mono mb-4">
							Information						</h5>
													<ul class="text-xs sidebar-list">
								<li id="n-About-zodiac.wiki" class="mw-list-item"><a href="index.html">About zodiac.wiki</a></li><li id="n-zodiac.wiki-Partners" class="mw-list-item"><a href="./index.php%3Ftitle=Category:Partners.html">zodiac.wiki Partners</a></li><li id="n-FAQ:-zodiac.wiki" class="mw-list-item"><a href="./index.php%3Ftitle=FAQ:_zodiac.wiki.html">FAQ: zodiac.wiki</a></li><li id="n-FAQ:-Zodiac-Standard" class="mw-list-item"><a href="./index.php%3Ftitle=FAQ:_Zodiac_Standard.html">FAQ: Zodiac Standard</a></li>							</ul>
											</div>
									<div
						class="p-4 border-2 border-double shadow-2xl bg-brown-900 border-brown-500 bg-blur-12"
						id="p-Wiki_Resources" 					>
												<h5 class="mt-0 font-mono mb-4">
							Wiki Resources						</h5>
													<ul class="text-xs sidebar-list">
								<li id="n-Contribution-Guide" class="mw-list-item"><a href="index.php%3Ftitle=Contribution_Guide.html">Contribution Guide</a></li><li id="n-Upload-File" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Special:Upload">Upload File</a></li><li id="n-zodiac.wiki-Templates" class="mw-list-item"><a href="index.php%3Ftitle=Zodiac.wiki_Templates.html">zodiac.wiki Templates</a></li><li id="n-Zodiac-Wikitext-Cheatsheet" class="mw-list-item"><a href="index.php%3Ftitle=Zodiac_Wikitext_Cheatsheet.html">Zodiac Wikitext Cheatsheet</a></li>							</ul>
											</div>
									<div
						class="p-4 border-2 border-double shadow-2xl bg-brown-900 border-brown-500 bg-blur-12"
						id="p-Patterns" 					>
													<img class="w-8 h-8 mb-1" src="skins/zodiac/assets/images/wiki_PATTERN.png" alt="Patterns Category orb" />
												<h5 class="mt-0 font-mono mb-4">
							Patterns						</h5>
													<ul class="text-xs sidebar-list">
								<li id="n-Introduction:-Patterns" class="mw-list-item"><a href="./index.php%3Ftitle=Introduction:_Patterns.html">Introduction: Patterns</a></li><li id="n-Browse-Patterns" class="mw-list-item"><a href="./index.php%3Ftitle=Category:Patterns.html">Browse Patterns</a></li>							</ul>
											</div>
									<div
						class="p-4 border-2 border-double shadow-2xl bg-brown-900 border-brown-500 bg-blur-12"
						id="p-Library" 					>
													<img class="w-8 h-8 mb-1" src="skins/zodiac/assets/images/wiki_LIBRARY.png" alt="Library Category orb" />
												<h5 class="mt-0 font-mono mb-4">
							Library						</h5>
													<ul class="text-xs sidebar-list">
								<li id="n-Introduction:-Library" class="mw-list-item"><a href="./index.php%3Ftitle=Introduction:_Library.html">Introduction: Library</a></li><li id="n-Browse-Library" class="mw-list-item"><a href="./index.php%3Ftitle=Category:Library.html">Browse Library</a></li>							</ul>
											</div>
									<div
						class="p-4 border-2 border-double shadow-2xl bg-brown-900 border-brown-500 bg-blur-12"
						id="p-Documentation" 					>
													<img class="w-8 h-8 mb-1" src="skins/zodiac/assets/images/wiki_DOCUMENTATION.png" alt="Documentation Category orb" />
												<h5 class="mt-0 font-mono mb-4">
							Documentation						</h5>
													<ul class="text-xs sidebar-list">
								<li id="n-Introduction:-Zodiac-Standard" class="mw-list-item"><a href="./index.php%3Ftitle=Introduction:_Zodiac_Standard.html">Introduction: Zodiac Standard</a></li><li id="n-Browse-Documentation" class="mw-list-item"><a href="./index.php%3Ftitle=Category:Documentation.html">Browse Documentation</a></li>							</ul>
											</div>
									<div
						class="p-4 border-2 border-double shadow-2xl bg-brown-900 border-brown-500 bg-blur-12"
						id="p-Stories" 					>
												<h5 class="mt-0 font-mono mb-4">
							Stories						</h5>
													<ul class="text-xs sidebar-list">
								<li id="n-Introduction:-Stories" class="mw-list-item"><a href="./index.php%3Ftitle=Introduction:_Stories.html">Introduction: Stories</a></li><li id="n-Browse-Stories" class="mw-list-item"><a href="./index.php%3Ftitle=Category:Stories.html">Browse Stories</a></li>							</ul>
											</div>
									<div
						class="p-4 border-2 border-double shadow-2xl bg-brown-900 border-brown-500 bg-blur-12"
						id="p-tb" 					>
												<h5 class="mt-0 font-mono mb-4">
							Tools						</h5>
													<ul class="text-xs sidebar-list">
								<li id="t-whatlinkshere" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Special:WhatLinksHere/Category:Custom_Module" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Special:RecentChangesLinked/Category:Custom_Module" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Category:Custom_Module&amp;oldid=444" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Category:Custom_Module&amp;action=info" title="More information about this page">Page information</a></li>							</ul>
											</div>
									<div
						class="p-4 border-2 border-double shadow-2xl bg-brown-900 border-brown-500 bg-blur-12"
						id="p-navigation" 					>
												<h5 class="mt-0 font-mono mb-4">
							Navigation						</h5>
													<ul class="text-xs sidebar-list">
								<li id="n-mainpage-description" class="mw-list-item"><a href="index.html" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help-mediawiki" class="mw-list-item"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents">Help about MediaWiki</a></li>							</ul>
											</div>
				
			</div>
			<div class="flex-1 col-start-1 col-span-12 md:col-start-5 lg:col-start-4 md:col-span-9">
				<div id="p-cactions">
					<div class="container md:flex flex-end justify-between mx-auto mb-2">
						<ul class="flex flex-wrap content-end list-reset space-x-2 content-actions">
							<li id="ca-nstab-category" class="selected mw-list-item"><a href="./index.php%3Ftitle=Category:Custom_Module.html" title="View the category page [c]" accesskey="c">Category</a></li><li id="ca-talk" class="new mw-list-item"><a href="https://zodiac.wiki/index.php?title=Category_talk:Custom_Module&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></li><li id="ca-viewsource" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Category:Custom_Module&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li id="ca-history" class="mw-list-item"><a href="https://zodiac.wiki/index.php?title=Category:Custom_Module&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>						</ul>
						<form action="https://zodiac.wiki/index.php" class="inline-block mb-0 mt-2 md:mt-0 md:ml-2 w-full md:w-64">
							<input type="hidden" name="title" value="Special:Search" />
							<input type="search" name="search" placeholder="Search Gnosis zodiac.wiki" autocapitalize="sentences" title="Search Gnosis zodiac.wiki [f]" accesskey="f" id="searchInput" class="w-full"/>						</form>
					</div>
				</div>
				<div class="p-6 mx-auto border-2 border-double shadow-2xl border-brown-500 bg-brown-900 bg-opacity-80 bg-blur-12 main-content">

					
						<div id="sitenotice">
													</div>

						<div class="page-title">

							<div class="mw-indicators">
<div id="mw-indicator-mw-helplink" class="mw-indicator"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Categories" target="_blank" class="mw-helplink">Help</a></div>
</div>
							<h1 class="p-0 m-0 leading-none">
								Custom Module							</h1>

													</div>

					<div class="lg:flex flex-row-reverse">
						<div class="flex-1 mt-6 lg:mt-0">
							<div class="articlebody">
								<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><p><a href="./index.php%3Ftitle=File:Banner-custom.jpg.html" class="image"><img alt="Banner-custom.jpg" src="images/e/ee/Banner-custom.jpg" decoding="async" width="1512" height="792" /></a>
</p>
<div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Get_started"><span class="tocnumber">1</span> <span class="toctext">Get started</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="./index.php%3Ftitle=Category:Custom_Module.html#About_the_Custom_Module"><span class="tocnumber">1.1</span> <span class="toctext">About the Custom Module</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Set_up_IDE"><span class="tocnumber">1.2</span> <span class="toctext">Set up IDE</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Deploy_Button_and_MockSafe"><span class="tocnumber">1.3</span> <span class="toctext">Deploy Button and MockSafe</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Build_Your_Module"><span class="tocnumber">2</span> <span class="toctext">Build Your Module</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="./index.php%3Ftitle=Category:Custom_Module.html#What_is_a_module?"><span class="tocnumber">2.1</span> <span class="toctext">What is a module?</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Import_Module.sol"><span class="tocnumber">2.2</span> <span class="toctext">Import Module.sol</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Factory_Friendly"><span class="tocnumber">2.3</span> <span class="toctext">Factory Friendly</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Deploy_Your_Module"><span class="tocnumber">3</span> <span class="toctext">Deploy Your Module</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Push_the_button!"><span class="tocnumber">3.1</span> <span class="toctext">Push the button!</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Deploy_To_Rinkeby"><span class="tocnumber">4</span> <span class="toctext">Deploy To Rinkeby</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Create_a_Safe"><span class="tocnumber">4.1</span> <span class="toctext">Create a Safe</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Deploy_your_Button_and_Module"><span class="tocnumber">4.2</span> <span class="toctext">Deploy your Button and Module</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Verify_on_Etherscan"><span class="tocnumber">4.3</span> <span class="toctext">Verify on Etherscan</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Push_the_button!_2"><span class="tocnumber">4.4</span> <span class="toctext">Push the button!</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="./index.php%3Ftitle=Category:Custom_Module.html#Questions?"><span class="tocnumber">5</span> <span class="toctext">Questions?</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Get_started">Get started</span></h2>
<h3><span class="mw-headline" id="About_the_Custom_Module">About the Custom Module</span></h3>
<p>In this tutorial, you'll learn the fundamental concepts of Zodiac modules while you build a super-simple example of a Custom Module. We will deploy it first on a local test environment to control a mock Gnosis Safe, then later use it to control a real <a rel="nofollow" class="external text" href="http://gnosis-safe.io/">Gnosis Safe</a> on a public test network.
</p><p>If you need support or have questions about this tutorial or Zodiac, join the <a rel="nofollow" class="external text" href="https://discord.gg/gnosisguild">Gnosis Guild Discord</a>.
</p>
<h3><span class="mw-headline" id="Set_up_IDE">Set up IDE</span></h3>
<p>For this tutorial, we'll make use of <a rel="nofollow" class="external text" href="https://remix.ethereum.org/">Remix</a>, a powerful web-based integrated development environment (IDE) for building Ethereum applications. However, these instructions should port easily to whichever developer environment you prefer.
</p><p>Start by importing <a rel="nofollow" class="external text" href="https://gist.github.com/auryn-macmillan/105ae8f09c34406997d217ee4dc0f63a">this gist</a>.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom01.png.html" class="image"><img alt="Custom01.png" src="images/9/97/Custom01.png" decoding="async" width="1154" height="780" /></a>
</p><p><br />
</p><p>This will add three files to your working directory: <code>Button.sol</code>, <code>MockSafe.sol</code>, and <code>MyModule.sol</code>.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom02.png.html" class="image"><img alt="Custom02.png" src="images/a/a0/Custom02.png" decoding="async" width="788" height="428" /></a>
</p><p><br />
</p><p>Alternatively, you can create each of the files manually and copy the code from <a rel="nofollow" class="external text" href="https://gist.github.com/auryn-macmillan/105ae8f09c34406997d217ee4dc0f63a">the gist</a>.
</p>
<ul><li><code>Button.sol</code> is a contract with one function, <code>pushButton()</code>, which increments a counter, <code>pushes</code>. The <code>pushButton()</code> function is only callable by the contract's "owner", which will be our Gnosis Safe.</li></ul>
<ul><li><code>MockSafe.sol</code> is a mock of the Gnosis Safe that we'll use for simplicity as we build and test in our local environment. Later, we'll replace it with a real Gnosis Safe on a public test network to ensure our module works.</li></ul>
<ul><li><code>MyModule.sol</code> is where you'll be adding your own code to control the Gnosis Safes and make it push the button in our <code>Button.sol</code> contract.</li></ul>
<h3><span class="mw-headline" id="Deploy_Button_and_MockSafe">Deploy Button and MockSafe</span></h3>
<p>Before writing any of our own code, we should deploy our Button and MockSafe contracts to our local environment.
</p><p>Navigate to the "Solidity Compiler" tab and check "Auto compile". This will re-compile your contract each time you make a change.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom03.png.html" class="image"><img alt="Custom03.png" src="images/0/09/Custom03.png" decoding="async" width="462" height="602" /></a>
</p><p><br />
</p><p>With <code>Button.sol</code> open, navigate to the "Deploy &amp; Run Transactions" tab, select "Button" from the contracts dropdown, and hit "deploy". Repeat these steps for <code>MockSafe.sol</code>.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom04.png.html" class="image"><img alt="Custom04.png" src="images/c/ca/Custom04.png" decoding="async" width="2140" height="1114" /></a>
</p><p><br />
</p><p>You will now see that two items have appeared in the "deployed contracts" section slightly below the deploy button, one each for <code>Button.sol</code> and <code>MockSafe.sol</code>. You can expand the view of either by clicking the carat to the left of the name, exposing the variables and functions for the contract.
</p><p>Test that your button works by clicking on the "pushes" button on your deployed Button. It should return <code>0</code>. Next, click the "pushButton" button and then the "pushes" button again. This time it should return <code>1</code>.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom05.png.html" class="image"><img alt="Custom05.png" src="images/7/7d/Custom05.png" decoding="async" width="389" height="944" /></a>
</p><p><br />
</p><p>Copy the address of your <code>MockSafe</code>, expand your deployed <code>Button</code>, and call the <code>transferOwnership()</code> function, pasting in your MockSafe's address for the parameter.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom06.png.html" class="image"><img alt="Custom06.png" src="images/7/74/Custom06.png" decoding="async" width="768" height="495" /></a>
</p><p><br />
</p><p>Now that you've transferred ownership, clicking the "pushButton" button on your Button will now fail. You'll instead need your MockSafe to execute the transaction.
</p><p>Expand your MockSafe and call the <code>exec</code> function with the following parameters:
</p>
<ul><li>to: <code>{address of your deployed Button contract}</code></li>
<li>value: <code>0</code></li>
<li>data: <code>"0x0a007972"</code> <i>(the ABI encoded function signature for the <code>pushButton()</code> function)</i></li></ul>
<p>Clicking the "pushes" button on your Button should now show that <code>pushes</code> has been incremented again.
</p><p>You're all set up now! Let's start building. 🎉
</p>
<h2><span class="mw-headline" id="Build_Your_Module">Build Your Module</span></h2>
<h3><span id="What_is_a_module.3F"></span><span class="mw-headline" id="What_is_a_module?">What is a module?</span></h3>
<p>By default, Gnosis Safes operate as multisig wallets, requiring confirmation from n of m signers in order to execute transactions. However, in addition to (or instead of) using the multisig logic, you can enable "modules" on your Gnosis Safe. Modules are simply addresses that are allowed to bypass the normal multisig logic by calling special functions, <code>execTransactionFromModule()</code> or <code>execTransactionFromModuleReturnData()</code>.
</p><p>Earlier, you deployed and set up a Mock Safe and a Button that can only be pushed by the Mock Safe.
</p><p>Now we'll create a Module that can trigger the Mock Safe to push the Button.
</p>
<h3><span class="mw-headline" id="Import_Module.sol">Import Module.sol</span></h3>
<p>First and foremost, Zodiac is a philosophy for building composable DAO tooling. To make it easier on aspiring module developers, we've built a library of tools that you can import into your own contracts to help ensure your modules are Zodiac compatible and to reduce the amount of time and effort required for implementation.
</p><p>Simply import <a rel="nofollow" class="external text" href="https://github.com/gnosis/zodiac/blob/master/contracts/core/Module.sol">Module.sol</a> from the Zodiac library and add whatever logic your module needs.
</p><p><code>pragma solidity ^0.8.6;</code>
</p><p><code>import "@gnosis.pm/zodiac/contracts/core/Module.sol";</code>
</p><p><code>contract MyModule is Module {</code><br />
<code>&#160;  /// insert your code here</code><br />
<code>}</code>
</p><p>In our case, we want to add a function to tell our Safe to push the button.
</p><p>Define an <code>address button</code> variable and add a <code>pushButton</code> function to your contract that calls the <code>exec()</code> function from <code>Module.sol</code>.
</p><p><code>exec()</code> will call the <code>execTransactionFromModule()</code> function on the connected Safe. It has four parameters:
</p>
<ul><li><b>to:</b> the address that the Safe will call. The Button contract in our case.</li>
<li><b>value:</b> the amount of ETH in wei that should be sent with the transaction. This is zero in our case.</li>
<li><b>data:</b> the ABI-encoded transaction data for the Safe's transaction. In our case, this is the function selector for the <code>pushButton()</code> function.</li>
<li><b>operation:</b> defines whether the transaction should be a call or a delegate call. In our case, we'll just do a call.</li></ul>
<p><code>address public button;</code>
</p><p><code>function pushButton() external {</code><br />
<code>&#160;&#160;    exec(</code><br />
<code>&#160;&#160;&#160;&#160;        button,</code><br />
<code>&#160;&#160;&#160;&#160;        0,</code><br />
<code>&#160;&#160;&#160;&#160;        abi.encodePacked(bytes4(keccak256("pushButton()"))),</code><br />
<code>&#160;&#160;&#160;&#160;        Enum.Operation.Call</code><br />
<code>&#160;&#160;    );</code><br />
<code>}</code>
</p><p>That's essentially it! The bulk of your work in creating a module is defining the conditions under which <code>exec()</code> can be called.
</p>
<h3><span class="mw-headline" id="Factory_Friendly">Factory Friendly</span></h3>
<p>Wait, I'm still seeing compiler errors.
</p><p><code>Module.sol</code> provides another convenience feature to enable any module to be compatible with our <a rel="nofollow" class="external text" href="https://github.com/gnosis/zodiac/blob/master/contracts/factory/ModuleProxyFactory.sol">ModuleProxyFactory</a> and the Zodiac Safe App. This makes it easier to streamline deployment and set up modules. For example, we can do things like batch deployment of a Safe, its modules, and the calls to enable the modules into one Ethereum transaction. 🤯
</p><p>Before our contract will compile, you'll need to add a constructor and a setup function. The constructor is a function that is automatically called once when the contract is deployed; it is typically used to initialize the contract. Notice that our constructor simply ABI encodes the parameters that were passed in and then calls the <code>setUp()</code> function. This gives users the option to deploy the module directly or deploy using the <a rel="nofollow" class="external text" href="https://github.com/gnosis/zodiac/blob/master/contracts/factory/ModuleProxyFactory.sol">ModuleProxyFactory</a>.
</p><p><code>constructor(address _owner, address _button) {</code><br />
<code>&#160;&#160;    bytes memory initializeParams = abi.encode(_owner, _button);</code><br />
<code>&#160;&#160;    setUp(initializeParams);</code><br />
<code>}</code>
</p><p><code>/// @dev Initialize function, will be triggered when a new proxy is deployed</code><br />
<code>/// @param initializeParams Parameters of initialization encoded</code><br />
<code>function setUp(bytes memory initializeParams) public override initializer {</code><br />
<code>&#160;&#160;    __Ownable_init();</code><br />
<code>&#160;&#160;    (address _owner, address _button) = abi.decode(initializeParams, (address, address));</code>
</p><p><code>&#160;&#160;    button = _button;</code><br />
<code>&#160;&#160;    setAvatar(_owner);</code><br />
<code>&#160;&#160;    setTarget(_owner);</code><br />
<code>&#160;&#160;    transferOwnership(_owner);</code><br />
<code>}</code>
</p><p>Our <code>setUp()</code> function will set the <code>button</code> address, then <code>avatar</code>, <code>target</code>, and <code>owner</code> will all be set to the same address. This is true in most cases, but there are subtle distinctions between the three that sometimes require different addresses.
</p>
<ul><li><b>Avatar</b> is the Safe, the Address that will ultimately execute the transaction passed by the module.</li>
<li><b>Target</b> is the address that this module will call <code>execTransactionFromModule()</code> on. In most cases, this will be the Safe, but in some cases, it could be a special kind of module called a <a rel="nofollow" class="external text" href="https://github.com/gnosis/zodiac/blob/master/contracts/core/Modifier.sol">modifier</a> that sits between a module and an avatar and modifies the transactions passed to it in some way.</li>
<li><b>Owner</b> is the address that has permissions to call <code>OnlyOwner()</code> functions on the module.</li></ul>
<p>In case your <code>MyModule.sol</code> is still not compiled, <a rel="nofollow" class="external text" href="https://gist.github.com/auryn-macmillan/841906d0bc6c2624e83598cdfac17de8">here's one we baked earlier</a>.
</p>
<h2><span class="mw-headline" id="Deploy_Your_Module">Deploy Your Module</span></h2>
<p>Now that your module is compiling, it's time to deploy it on your local test environment.
</p>
<ul><li>For the <code>owner</code> parameter, use the address of your previously deployed <code>MockSafe</code></li>
<li>For the <code>button</code> parameter, use the address of your previously deployed <code>Button</code></li></ul>
<p>Once it's deployed, you can expand it to see your <code>pushButton()</code> function, along with a handful of other functions and variables imported from <code>Module.sol</code>.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom07.png.html" class="image"><img alt="Custom07.png" src="images/6/64/Custom07.png" decoding="async" width="782" height="650" /></a>
</p><p><br />
</p><p>Safes must explicitly enable addresses as modules to give them access to the <code>execTransactionFromModule()</code> function. So, before your <code>pushButton</code> function will work, you'll need to enable your module on your Safe by calling the <code>enableModule()</code> function.
</p><p><b>Note: a real Gnosis Safe can have multiple modules enabled at once, but our Mock Safe can have only one.</b>
</p>
<h3><span id="Push_the_button.21"></span><span class="mw-headline" id="Push_the_button!">Push the button!</span></h3>
<p>Now for the moment of truth. Click the <code>pushButton()</code> function on your deployed <code>MyModule</code> and then click <code>pushes</code> to see the glorious fruits of your labor.
</p><p>Go ahead, click it a few more times. You've earned it.
</p><p>Make sure to try pushing the button directly in the button contract to confirm that it fails unless it is called by the Safe.
</p><p>Now you're ready to do this on a real Gnosis Safe!
</p>
<h2><span class="mw-headline" id="Deploy_To_Rinkeby">Deploy To Rinkeby</span></h2>
<h3><span class="mw-headline" id="Create_a_Safe">Create a Safe</span></h3>
<p>Navigate to rinkeby.gnosis-safe.io/app/ and create a new Gnosis Safe.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom08.png.html" class="image"><img alt="Custom08.png" src="images/0/0d/Custom08.png" decoding="async" width="2988" height="1372" /></a>
</p><p><br />
</p>
<h3><span class="mw-headline" id="Deploy_your_Button_and_Module">Deploy your Button and Module</span></h3>
<p>Return to Remix and change your provider to "injected web3" to connect to MetaMask. Make sure your MetaMask is connected to Rinkeby.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom09.png.html" class="image"><img alt="Custom09.png" src="images/f/f0/Custom09.png" decoding="async" width="604" height="340" /></a>
</p><p><br />
</p><p>Deploy your <code>Button</code> contract and set its owner to your newly created Safe's address. Make sure you have <code>Button.sol</code> opened, otherwise it will not show up in the "Deploy and Run Transactions" tab.
</p><p>Deploy your <code>MyModule</code> using your newly created Safe's address for the <code>_owner</code> parameter and your newly deployed Button contract's address for the <code>_button</code> parameter. Make sure you have <code>MyModule.sol</code> opened, otherwise it will not show up in the "Deploy and Run Transactions" tab.
</p><p>In the Gnosis Safe app, navigate to the <code>APPS</code> tab and select the Zodiac Safe App.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom10.png.html" class="image"><img alt="Custom10.png" src="images/9/96/Custom10.png" decoding="async" width="686" height="381" /></a>
</p><p><br />
</p><p>Select "custom module", enter the address of your newly deployed module, and click "Add Module".
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom11.png.html" class="image"><img alt="Custom11.png" src="images/3/3d/Custom11.png" decoding="async" width="698" height="316" /></a>
</p><p><br />
</p><p>Once the transaction confirms, your new module should show up in your list of enabled modules.
</p>
<h3><span class="mw-headline" id="Verify_on_Etherscan">Verify on Etherscan</span></h3>
<p>If you want to interact with your module in the Zodiac Safe app, you'll need to verify its source code on Etherscan.
</p><p>Open your module on Etherscan by clicking the Etherscan button next to your contract's address.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom12.png.html" class="image"><img alt="Custom12.png" src="images/1/16/Custom12.png" decoding="async" width="648" height="438" /></a>
</p><p><br />
</p><p>Navigate to the "Contract" tab and select "verify and publish".
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom13.png.html" class="image"><img alt="Custom13.png" src="images/1/17/Custom13.png" decoding="async" width="601" height="156" /></a>
</p><p><br />
</p><p>Enter your module's address.
</p><p>Select compiler type "Solidity (single file)".
</p><p>Select your compiler version, making sure it matches the version selected in the "Solidity Compiler" tab on Remix.
</p><p>Choose a license and then hit continue.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom14.png.html" class="image"><img alt="Custom14.png" src="images/8/85/Custom14.png" decoding="async" width="2534" height="1518" /></a>
</p><p><br />
</p><p>In Remix, add the "Flattener" plugin from the "Plugin Manager" tab.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom15.png.html" class="image"><img alt="Custom15.png" src="images/f/f7/Custom15.png" decoding="async" width="454" height="442" /></a>
</p><p><br />
</p><p>Select "MyModule.sol" and then click the button to copy the flattened code to your clipboard.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom16.png.html" class="image"><img alt="Custom16.png" src="images/7/79/Custom16.png" decoding="async" width="2470" height="970" /></a>
</p><p><br />
</p><p>Back in Etherscan, paste your flattened code into the text box.
</p><p>Double check that your optimization settings match what you have selected in the Solidity compiler on Remix.
</p><p>Then click verify and publish.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom17.png.html" class="image"><img alt="Custom17.png" src="images/3/33/Custom17.png" decoding="async" width="2800" height="1840" /></a>
</p><p><br />
</p><p>If all goes well, you should see a success screen on Etherscan, and if you refresh the Zodiac app, you should see more details about your Module.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom18.png.html" class="image"><img alt="Custom18.png" src="images/0/0e/Custom18.png" decoding="async" width="2052" height="950" /></a>
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom19.png.html" class="image"><img alt="Custom19.png" src="images/2/27/Custom19.png" decoding="async" width="2049" height="828" /></a>
</p><p><br />
</p>
<h3><span id="Push_the_button.21_2"></span><span class="mw-headline" id="Push_the_button!_2">Push the button!</span></h3>
<p>Back in Remix, try pushing the button in your <code>MyModule</code> contract.
</p><p>Once that transaction has been confirmed, you should see a new "contract interaction" item in your Safe's transaction history.
</p><p><br />
<a href="./index.php%3Ftitle=File:Custom20.png.html" class="image"><img alt="Custom20.png" src="images/7/72/Custom20.png" decoding="async" width="1922" height="1072" /></a>
</p><p><br />
</p><p>Congratulations! You've successfully built a Zodiac module, deployed it to a public test network, and controlled a Gnosis Safe with it.
</p>
<h2><span id="Questions.3F"></span><span class="mw-headline" id="Questions?">Questions?</span></h2>
<p>If you need support or have questions about Zodiac, join the <a rel="nofollow" class="external text" href="https://discord.gg/gnosisguild">Gnosis Guild Discord</a>.
</p>
<!-- 
NewPP limit report
Cached time: 20240429110116
Cache expiry: 86400
Reduced expiry: false
Complications: []
CPU time usage: 0.055 seconds
Real time usage: 0.064 seconds
Preprocessor visited node count: 88/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key mediawiki:pcache:idhash:46-0!canonical and timestamp 20240429110116 and revision id 444. Serialized with JSON.
 -->
</div><div class="mw-category-generated" lang="en" dir="ltr"><p><em>This category currently contains no pages or media.</em>
</p></div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://zodiac.wiki/index.php?title=Category:Custom_Module&amp;oldid=444">https://zodiac.wiki/index.php?title=Category:Custom_Module&amp;oldid=444</a>"</div>
							</div>
														<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://zodiac.wiki/index.php?title=Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="./index.php%3Ftitle=Category:Documentation.html" title="Category:Documentation">Documentation</a></li><li><a href="./index.php%3Ftitle=Category:Module.html" title="Category:Module">Module</a></li><li><a href="./index.php%3Ftitle=Category:DAO_Operator.html" title="Category:DAO Operator">DAO Operator</a></li></ul></div></div>						</div>
					</div>

				</div>

				<div class="footer">
					<div class="footer-icons">
															<div>
									<a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31" loading="lazy"/></a>								</div>
															<div>
									<a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="resources/assets/poweredby_mediawiki_132x47.png 1.5x, resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" loading="lazy"/></a>								</div>
													</div>

													<ul class="list-reset">
																	<li> This page was last edited on 3 June 2022, at 22:59.</li>
																	<li>Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
															</ul>
													<ul class="list-reset">
																	<li><a href="https://zodiac.wiki/index.php?title=Gnosis_zodiac_mediawiki:Privacy_policy" title="Gnosis zodiac mediawiki:Privacy policy">Privacy policy</a></li>
																	<li><a href="./index.php%3Ftitle=Gnosis_zodiac_mediawiki:About.html" title="Gnosis zodiac mediawiki:About">About Gnosis zodiac.wiki</a></li>
																	<li><a href="./index.php%3Ftitle=Gnosis_zodiac_mediawiki:General_disclaimer.html" title="Gnosis zodiac mediawiki:General disclaimer">Disclaimers</a></li>
															</ul>
											</div>
				</div>

			</div>
		</div>
	</div>

	
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.055","walltime":"0.064","ppvisitednodes":{"value":88,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20240429110116","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":134});});</script>	</body>

	</html>